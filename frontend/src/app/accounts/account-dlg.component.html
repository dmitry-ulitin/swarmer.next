<form [formGroup]=form>
    <tui-input formControlName="fullname" [tuiTextfieldSize]="'s'">Name</tui-input>
    <div class="d-flex mt-3">
        <span class="flex-fill">Initial Balances</span>
        <button tuiIconButton type="button" [icon]="'tuiIconPlus'" [size]="'s'" [appearance]="'flat'" (click)="onAddAccount()"></button>
    </div>
    <table class="w-100">
        <tr *ngFor="let account of accounts.controls; let i = index" formArrayName="accounts">
            <ng-template [formGroupName]="i" [ngIf]="!account.value.deleted">
                <td>
                    <tui-input formControlName="name" [tuiTextfieldSize]="'s'">{{account.value.currency}}</tui-input>
                </td>
                <td>
                    <tui-input formControlName="currency" [tuiTextfieldSize]="'s'">Currency</tui-input>
                </td>
                <td>
                    <tui-input-number formControlName="start_balance" [tuiTextfieldSize]="'s'">Start Balance
                    </tui-input-number>
                </td>
                <td>
                    <button tuiIconButton type="button" [icon]="'tuiIconTrash'" [size]="'s'" [appearance]="'flat'" [disabled]="!canDelete" (click)="onRemoveAccount(i)"></button>
                </td>
            </ng-template>
        </tr>
    </table>
    <div class="tui-form__buttons">
        <button tuiButton type="button" [size]="'s'" class="tui-form__button" (click)="onSubmit()">Save</button>
        <button tuiButton type="button" [size]="'s'" class="tui-form__button" (click)="onCancel()">Cancel</button>
    </div>
</form>