<table class="table">
    <tr *ngFor="let g of groups$ | async" (click)="toggle(g)" [class.active]="g.selected"
        [class.expanded]="(expanded$ | async).includes(g.id)" [class.owner]="g.belong==1"
        [class.coowner]="g.belong==2" [class.shared]="g.belong==3">
        <td  [class.active]="isGroupSelected(g)">
            <div class="group"><a tuiLink  (click)="selectGroup(g, $event)" class="foo">{{g.full_name}}</a></div>
            <div class="account" *ngFor="let a of g.accounts" [class.active]="isAccountSelected(a)">
                <ng-template [ngIf]="!a.deleted"><a tuiLink (click)="selectAccount(a, $event)">{{a.full_name}}</a></ng-template>
            </div>
        </td>
        <td>
            <tui-svg *ngIf="g.accounts.length > 1" src="tuiIconChevronDown" class="icon"></tui-svg>
        </td>
        <td class="text-end">
            <div class="group" *ngFor="let t of total(g)">{{t.value | currency:t.currency}}</div>
            <div class="account" *ngFor="let a of g.accounts">
                <ng-template [ngIf]="!a.deleted">{{a.balance | currency:a.currency}}</ng-template>
            </div>
        </td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td class="text-end">
            <div *ngFor="let t of total$ | async">{{t.value | currency:t.currency}}</div>
        </td>
    </tr>
</table>